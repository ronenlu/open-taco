# Define your Terraform projects
projects:
  - name: database-schema           # Unique name for this project
    dir: .                          # Directory containing Terraform files
    workflow: default               # Which workflow to use
    terragrunt: false               # Set to true if using Terragrunt
    # Uncomment to auto-apply when PR is merged:
    # apply_on_merge: true

# Define reusable workflows
workflows:
  default:
    # Steps to run on pull request (plan)
    plan:
      steps:
        - init                      # terraform init
        - plan                      # terraform plan
    # Steps to run on apply
    apply:
      steps:
        - init                      # terraform init
        - apply                     # terraform apply
    # Optional: Configure plan behavior
    configuration:
      on_pull_request_pushed: ["digger plan"]
      on_pull_request_closed: ["digger unlock"]
      on_commit_to_default: ["digger apply"]